#!/usr/bin/python

import os
import argparse

parser = argparse.ArgumentParser()

parser.add_argument(
    '-urls', 
    required=True, 
    help='Urls file (one per line + no comma)', 
    type=argparse.FileType('r')
)

parser.add_argument(
    '-follow', 
    help='Follow redirects (true / false)',
    default=False
)

args = parser.parse_args()

print ":::: MASS URLS STATUS ::::::::::::::::::::::::::"

follow = ''
if(args.follow):
    follow = 'L' 

with args.urls as infile:
    for url in infile:
        print '\n-----------------------------------------------------'
        print url + '\n'
        os.system("curl -I" + follow + " " + url.strip() + " --silent | grep -i 'HTTP'")
