# Files: Linux

## How many lines in the file

```bash
# File creation
$ echo "line1
dquote> line2
dquote> line3" >> myfile

# How many lines?
$ wc -l myfile
3 myfile

$ cat myfile 
line1
line2
line3
```

## Show a specific line of a file 
```bash
$ sed -n '2271p' test1
lollol
```

## Read a file
```bash
cat etc.txt 

#same as

awk '{print}' etc.txt
```

## Read all the file in a dir
```bash
cat directory/*.txt|less
```

## See a line that contains 

```bash 
$ awk '/michele/' test1
michele

$ grep -rni 'michele' test1 -C3
2547-MICHAEL
2548-michaela
2549-michel
2550:michele
2551-michell
2552-Michelle
2553-MICHELLE
```

## Find files

```bash
# find important files on Linux: suid and guid file
find / -type f -a \( -perm -u+s -o -perm -g+s \) -exec ls -l {} \; 2> /dev/null

find / -type f -perm -4000 2>/dev/null
```

```bash
# Find an file with an IP
find / -type f -exec grep -E -o "([0-9]{1,3}[\.]){3}[0-9]{1,3}" {} \+ 2>/dev/null
```

### Can I write somewhere?

```bash
#Find files owned by the user or writable by anybody
find / '(' -type f -or -type d ')' '(' '(' -user $USER ')' -or '(' -perm -o=w ')' ')' 2>/dev/null | grep -v '/proc/' | grep -v $HOME | sort | uniq 

#Find files writable by any group of the user
for g in `groups`; do find \( -type f -or -type d \) -group $g -perm -g=w 2>/dev/null | grep -v '/proc/' | grep -v $HOME; done

# root owned files in /home folders
find /home -user root 2>/dev/null

# Files owned by other users in folders owned by me
for d in `find /var /etc /home /root /tmp /usr /opt /boot /sys -type d -user $(whoami) 2>/dev/null`; do find $d ! -user `whoami` -exec ls -l {} \; 2>/dev/null; done

# Files owned by root, readable by me but no world readable
find / -type f -user root ! -perm -o=r 2>/dev/null

# Files owned by me or world writable
find / '(' -type f -or -type d ')' '(' '(' -user $USER ')' -or '(' -perm -o=w ')' ')' ! -path "/proc/*" ! -path "/sys/*" ! -path "$HOME/*" 2>/dev/null

# Writable files by each group I belong to
for g in `groups`;
      do printf "  Group $g:\n";
      find / '(' -type f -or -type d ')' -group $g -perm -g=w ! -path "/proc/*" ! -path "/sys/*" ! -path "$HOME/*" 2>/dev/null
      done
done
```
